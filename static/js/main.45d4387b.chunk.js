(this.webpackJsonpshitler=this.webpackJsonpshitler||[]).push([[0],{20:function(e,a,t){e.exports=t.p+"static/media/Liberal.5179a2ef.JPG"},21:function(e,a,t){e.exports=t.p+"static/media/Fascist.ed402502.JPG"},29:function(e){e.exports=JSON.parse('["abed","abel","able","ache","act","age","aged","aggo","ago","air","ale","alla","also","alyn","alys","arch","aren","areo","arm","arms","army","arry","arya","arys","ash","asha","ask","asks","ate","atop","aunt","away","axe","axes","aye","babe","baby","bad","bag","bald","band","bank","bar","bard","bare","bark","bars","base","bath","bay","bear","beat","bed","beds","beef","beer","beg","bell","belt","ben","bend","bent","best","bet","bid","big","bind","bird","bit","bite","bits","blew","blow","blue","boar","boat","body","boil","bold","bolt","bone","bony","book","boom","boot","bore","born","both","bow","bowl","bows","box","boy","boys","bran","brax","brow","bull","burn","bury","butt","buy","cage","call","calm","came","camp","cape","care","cart","case","cask","cast","cat","cats","cave","cell","chin","city","clad","claw","cock","cog","coin","cold","come","cook","cool","corn","cost","cow","crag","crew","crow","cry","cup","cups","cut","cuts","dais","damn","damp","dany","dare","dark","dawn","day","days","dead","deaf","deal","dear","debt","deck","deep","deer","den","deny","didn","die","died","dies","dim","dirk","dirt","dish","does","dog","dogs","dome","don","done","doom","door","drag","draw","drew","drop","drum","dry","duck","due","dug","dull","dung","dusk","dust","duty","duur","each","ear","ears","ease","east","easy","eat","edd","edge","eel","egg","eggs","elia","elk","else","end","ends","erik","even","ever","evil","eye","eyed","eyes","face","fail","fair","fall","far","fast","fat","fate","fear","fed","feed","feel","feet","fell","felt","few","fill","find","fine","fire","fish","fist","fit","five","flap","flat","flea","fled","flee","flew","flow","fly","foe","foes","fog","folk","fond","food","fool","foot","ford","fork","form","foul","four","fox","free","frey","frog","full","fur","furs","fury","game","garb","gash","gasp","gate","gave","gaze","gets","ghar","ghis","gift","girl","give","glad","glow","goat","god","gods","goes","gold","gone","good","got","gown","grab","grew","grey","grim","grin","grip","grow","gust","gut","hadn","hair","hal","half","hall","halt","ham","hand","hang","hard","harm","harp","has","hat","hate","hawk","head","heal","hear","heat","heed","heel","heh","heir","held","hell","helm","help","hero","hers","hid","hide","high","hill","hilt","hint","hip","hips","hire","hit","hoat","hobb","hold","hole","holy","home","hood","hook","hope","horn","host","hot","hour","howl","huge","hull","hung","hunt","hurt","hyle","ice","icy","idea","ill","ilyn","imp","inch","ink","inn","iron","irri","isle","isn","jack","jade","jape","jarl","jars","jaw","jaws","jest","joff","join","jon","jory","joy","keep","kept","key","keys","khal","kick","kill","kin","kind","king","kiss","knee","knew","kyra","lace","lack","lad","lads","lady","laid","lake","lamb","lame","lamp","land","lap","lark","lash","last","late","law","laws","lay","lazy","lead","leaf","lean","led","left","leg","legs","lem","leo","less","lest","let","liar","lick","lie","lied","lies","life","lift","limb","limp","line","lion","lip","lips","list","lit","live","lock","log","logs","long","look","lord","lose","loss","lost","lot","loud","love","low","luck","lust","lyn","lys","lysa","mace","mad","made","maid","mail","main","make","male","mane","many","map","maps","mare","mark","marq","mask","mast","may","maz","mead","meal","mean","meat","meet","melt","men","mere","met","mile","milk","mill","mind","mine","miss","mist","moat","mob","mock","mole","mood","moon","mord","mors","moss","most","move","much","mud","mule","must","mya","myr","name","nan","near","neck","ned","need","nest","net","new","news","next","nice","nine","nod","none","nor","nose","note","noye","nute","nym","oaf","oak","oars","oath","obey","odd","off","oft","oil","old","once","ones","onto","onyx","open","osha","our","ours","owe","owen","own","pace","pack","page","paid","pail","pain","pair","pale","palm","part","pass","past","pate","path","paul","pay","pays","peck","pet","pia","pick","pie","pies","pig","pigs","pile","pine","pink","piss","pit","pits","pity","plan","play","pod","pole","pool","poor","pork","port","pot","pots","pour","pox","pray","pree","prey","prow","pull","pup","pure","push","put","pyat","pyke","pyp","pyre","qarl","raff","rage","rags","rail","rain","ralf","ram","ran","rang","rank","rare","rat","rats","raw","read","real","rear","red","reed","reek","rest","ribs","rich","rid","ride","ring","rip","ripe","rise","risk","road","roar","robb","robe","rock","rode","roll","roof","room","root","rope","rose","rot","row","rows","ruby","ruin","rule","run","runs","rush","rust","saan","sack","sad","safe","sail","sake","salt","sam","same","sand","sang","sank","sat","save","saw","say","says","scar","sea","seal","seas","seat","seed","seek","seem","seen","sees","sell","send","sent","sept","ser","set","sewn","shae","shed","ship","shot","show","shut","shy","sick","side","sign","silk","sin","sing","sins","sip","sire","sit","sits","six","size","skin","sky","slap","slay","slew","slid","slim","slip","slit","slow","sly","snow","soft","soil","sold","son","song","sons","soon","sore","sort","soul","soup","sour","sow","spat","spit","spot","spun","stab","stag","star","stay","step","stew","stir","stop","styr","such","suck","suit","sun","sunk","sure","swam","sway","swim","tail","take","tale","talk","tall","task","tear","tell","ten","tend","tent","than","thin","tide","tied","till","tiny","toad","toe","toes","told","tom","tone","too","took","top","tore","torn","town","trap","tree","tris","true","try","tub","turn","twin","ugly","upon","use","used","vaes","vain","val","vale","van","vast","veil","vest","view","vile","vow","vows","waif","wait","wake","walk","wall","want","war","ward","warg","warm","warn","wars","wary","wash","wasn","wave","wax","way","wayn","ways","weak","wear","wed","weep","went","wept","west","wet","wex","whip","whom","why","wide","wife","wild","win","wind","wine","wing","wise","wish","wit","wits","woke","wolf","womb","won","wood","wool","word","wore","work","worm","worn","wun","wyk","xaro","xho","yard","year","yes","yet","yohn"]')},30:function(e,a,t){e.exports=t.p+"static/media/liberal-card-space.f5c7314a.JPG"},31:function(e,a,t){e.exports=t.p+"static/media/liberal-card-enact.5179a2ef.JPG"},32:function(e,a,t){e.exports=t.p+"static/media/liberal-card-win.de286c5f.JPG"},33:function(e,a,t){e.exports=t.p+"static/media/fascist-card-space.61fe29af.JPG"},34:function(e,a,t){e.exports=t.p+"static/media/fascist-card-enact.ed402502.JPG"},35:function(e,a,t){e.exports=t.p+"static/media/fascist-card-win.84f89324.JPG"},37:function(e,a,t){e.exports=t(54)},42:function(e,a,t){},43:function(e,a,t){},54:function(e,a,t){"use strict";t.r(a);var n=t(0),l=t.n(n),r=t(11),c=t.n(r),o=(t(42),t(43),t(12)),i=t.n(o),s=t(16),m=t(1),d=t(5),u=t(29),p=t(2),h=t(15),f=t(13),v=(t(25),{apiKey:"AIzaSyAvSp91vcvkgt9RYafRIgY8noH4NSX0P0g",authDomain:"isthisprime.firebaseapp.com",databaseURL:"https://isthisprime.firebaseio.com",projectId:"isthisprime",storageBucket:"isthisprime.appspot.com",messagingSenderId:"522572340456",appId:"1:522572340456:web:3f0afa40b9cb7d8550bd5d"});t(49);f.initializeApp(v);var b=f.firestore(),g=t(10),E=t(36),y={blueTeam:"Gryffindor",redTeam:"Death-Eater",redTeamLeader:"Voldemort",presidentTitle:"Minister",chancellorTitle:"Vice-Minister",RED:"BAD",BLUE:"GOOD"},w=function(e,a){e.set(Object(E.a)({},a,{lastUpdate:f.firestore.FieldValue.serverTimestamp()}))},k=function(e){var a=e.enactedPolicies.filter((function(e){return"BLUE"===e}));return{liberal:a.length,fascist:e.enactedPolicies.length-a.length}},N=function(e){for(var a=e.roles,t=e.players,n=0;n<t.length;n++)if("redLeader"===a[t[n]])return t[n]},j=function(e){var a=N(e);return Object(p.get)(e,"government.chancellor")===a},O=function(e){return Object(p.shuffle)([].concat(Object(g.a)(e.discards),Object(g.a)(e.policies)))},C=function(e){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:y,t=a.blueTeam,n=a.redTeam,l=a.redTeamLeader;return"blue"===e?t:"red"===e?n:"redLeader"===e?l:void 0},T=function(e){if(e.gameOver)return!0;var a=k(e);return 6===a.fascist||(5===a.liberal||!!(a.fascist>=3&&e.governmentApproved&&j(e)))},S=function(e){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:y;return a[e]};var x=function(e){var a=e.game,t=e.playerName,n=e.headline,r=void 0===n?"Players":n,c=e.onPlayerClick,o=void 0===c?function(){}:c,i=e.showRoles,s=void 0!==i&&i;if(!a)return null;var m=a.government,d=m.president,u=m.chancellor;return l.a.createElement("div",{className:"section"},l.a.createElement("h2",{className:"text-center"},r),l.a.createElement("div",{className:"row"},a.players.map((function(e,n){var r=C(a.roles[e]);return l.a.createElement("div",{className:"col-4 col-md-3 my-3 player-card",key:"player-".concat(n)},l.a.createElement("div",{className:"card h-100"},l.a.createElement("div",{className:"py-3 text-center ".concat(e===d?"president":""," ").concat(e===u?"chancellor":""," "),onClick:function(){o(e)}},l.a.createElement("div",null,l.a.createElement("i",{className:"fas fa-user"})),l.a.createElement("p",null,e," ",e===t?"(you)":""),e===d&&l.a.createElement("p",null,y.presidentTitle),e===u&&l.a.createElement("p",null,y.chancellorTitle),s&&l.a.createElement("p",{className:"".concat("blue"===a.roles[e]?"blue":"red")},r))))}))))};var P=function(e){e.game;var a=e.showPotentialGovernment,t=void 0!==a&&a,n=e.president,r=void 0===n?"":n,c=e.chancellor,o=void 0===c?"":c;return t?l.a.createElement("div",{className:"row mt-3"},l.a.createElement("div",{className:"col-8"},l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-5"},"Proposed ",y.presidentTitle,":"),l.a.createElement("div",{className:"col-6"},r)),l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-5"},"Proposed ",y.chancellorTitle,":"),l.a.createElement("div",{className:"col-6"},o)))):null};var A=function(e){var a=e.game,t=e.show,n=void 0===t?0:t,r=a.events;if(0===r.length)return null;var c=n>0?r.slice(-1*n):Object(g.a)(r);return l.a.createElement(l.a.Fragment,null,l.a.createElement("h3",{className:"headline text-center"},"Events"),l.a.createElement("ul",{className:"list-group event-list"},c.map((function(e,a){return l.a.createElement("li",{className:"list-group-item",key:"event-".concat(a)},e)}))))},R=t(20),G=t.n(R),V=t(21),H=t.n(V),F=t(7),z=t(22);var I=function(e){var a=e.game,t=e.playerName,r=e.autoReveal,c=void 0!==r&&r,o=e.onHide,i=void 0===o?function(){}:o,s=Object(n.useState)(!0===c),d=Object(m.a)(s,2),u=d[0],h=d[1],f=function(){i(),h(!1)},v=a.roles,b=N(a),g=v[t],E=y.redTeam,w=y.redTeamLeader,k=C(g,y);return l.a.createElement(l.a.Fragment,null,l.a.createElement("button",{className:"btn btn-primary ml-3",onClick:function(){return h(!0)}},"Reveal Secret Role"),l.a.createElement(F.a,{show:u,onHide:f},l.a.createElement(F.a.Header,{closeButton:!0},l.a.createElement(F.a.Title,null,"Your Secret Role: ",Object(p.capitalize)(k)," ")),l.a.createElement(F.a.Body,null,l.a.createElement("div",{className:"row justify-content-center role-reveal"},l.a.createElement("div",{className:"col-3"},"blue"===g?l.a.createElement("img",{alt:"blue card",src:G.a}):l.a.createElement("img",{alt:"red card",src:H.a}))),("red"===g||g===w&&a.players.length<7)&&l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col"},l.a.createElement("p",null,Object(p.capitalize)(w)," is: ",b))),l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col"},l.a.createElement("p",null,"All ",E,"s: ",function(e){var a=e.roles;return Object(p.filter)(Object(p.map)(a,(function(e,a){return"blue"!==e?a:null})))}(a).join(", ")))))),l.a.createElement(F.a.Footer,null,l.a.createElement(z.a,{variant:"secondary",onClick:f},"Close"))))};var L=function(e){var a=e.game,t=e.playerName,n=e.handleOkay,r=function(e){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:y,t=a.blueTeam,n=a.redTeam;return"blue"===e?t:n}(a.roles[t]);return l.a.createElement("div",{className:"container mt-5"},l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-4 col-md-3"},l.a.createElement("div",{className:"card shadow p-3 text-center"},l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col"},"Player: ",t)),l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col"},"Role: ",r)),l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col"},l.a.createElement("button",{className:"btn btn-primary mt-4",onClick:n},"OK")))))))};var B=function(e){var a=e.policies,t=e.onPolicyClick,n=void 0===t?function(){}:t,r=e.chosen,c=void 0===r?[]:r;return l.a.createElement("div",{className:"row"},a.map((function(e,a){var t="BLUE"===e?G.a:H.a;return l.a.createElement("div",{key:"policy-".concat(a),className:"col-2 text-center"},l.a.createElement("div",{className:"card py-3 policy-space",onClick:function(){return n(a)}},l.a.createElement("img",{className:"card-img-top",src:t,alt:"policy choice"}),l.a.createElement("div",{className:"mt-2"},c[a]?l.a.createElement("i",{className:"fas fa-check green"}):l.a.createElement("i",{className:"fas fa-times red"}))))})))};var D=function(e){var a=e.children,t=e.title,r=void 0===t?"Info":t,c=e.autoReveal,o=void 0===c||c,i=e.onHide,s=void 0===i?function(){}:i,d=Object(n.useState)(!0===o),u=Object(m.a)(d,2),p=u[0];return u[1],l.a.createElement(l.a.Fragment,null,l.a.createElement(F.a,{show:p,onHide:function(){s()}},l.a.createElement(F.a.Header,null,l.a.createElement(F.a.Title,null,r)),l.a.createElement(F.a.Body,null,a)))};var J=function(e){var a=e.game,t=e.playerName,r=e.gameRef,c=function(){return Array(3).fill(!1)},o=a.policyChoices,i=Object(n.useState)(c()),s=Object(m.a)(i,2),u=s[0],h=s[1],f=function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],t=Object(d.a)(a,(function(t){var n,l;(t.presidentHasChosen=!1,e)?a.chancellorHasVetoed?((l=t.discards).push.apply(l,Object(g.a)(a.policyChoices)),t.policyChoices=[],n="".concat(y.presidentTitle," has agreed to veto"),t.governmentApproved=!1,t.chancellorHasVetoed=!1,t.presidentHasChosen=!1,t.government={president:"",chancellor:""}):(n="".concat(y.chancellorTitle," has proposed a veto"),t.chancellorHasVetoed=!0):(t.presidentRejectedVeto=!0,n="".concat(y.presidentTitle," has rejected the veto"));t.events.push(n)}));console.log(t),w(r,t)},v=function(){return o.filter((function(e,a){return u[a]}))};if(!a.governmentApproved)return null;var b=Object(p.get)(a,"government.president")===t?y.presidentTitle:Object(p.get)(a,"government.chancellor")===t?y.chancellorTitle:null;if(!b)return l.a.createElement(D,{title:"Government in Session"},l.a.createElement("p",null,"Waiting for government to choose a new policy..."));if(b===y.presidentTitle&&!a.chancellorHasVetoed&&2===a.policyChoices.length)return l.a.createElement(D,{title:"Government in Session"},l.a.createElement("p",null,"Waiting for ",y.chancellorTitle));if(b===y.presidentTitle&&a.presidentRejectedVeto)return l.a.createElement(D,{title:"Government in Session"},l.a.createElement("p",null,"Rejected veto. Waiting for ",y.chancellorTitle));if(b===y.chancellorTitle&&a.chancellorHasVetoed&&!a.presidentRejectedVeto)return"Veto proposed. Waiting for ".concat(y.presidentTitle," to decide.");if(b===y.chancellorTitle&&!a.chancellorHasVetoed&&3===a.policyChoices.length)return l.a.createElement(D,{title:"Government in Session"},l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col"},l.a.createElement("p",null,"You are the ",b),l.a.createElement("p",null,"Waiting for ",y.presidentTitle," to choose"))));var E=k(a);return b===y.presidentTitle&&a.chancellorHasVetoed?l.a.createElement(l.a.Fragment,null,l.a.createElement(D,{title:"Veto Proposed"},l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col"},l.a.createElement("p",null,Object(p.capitalize)(y.chancellorTitle)," wants to veto these policies. Agree?"))),l.a.createElement(B,{policies:a.policyChoices,onPolicyClick:function(){},chosen:u}),l.a.createElement("div",{className:"row mt-3"},l.a.createElement("div",{className:"col-4"},l.a.createElement("button",{type:"button",className:"btn btn-primary",onClick:function(){f()}},"Agree to Veto")),l.a.createElement("div",{className:"col-4"},l.a.createElement("button",{type:"button",className:"btn btn-warning",onClick:function(){f(!1)}},"Reject Veto"))))):l.a.createElement(l.a.Fragment,null,l.a.createElement(D,{title:"Government in Session"},l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col"},l.a.createElement("p",null,"You are the ",b,"."," ",b===y.presidentTitle?"Choose 2 policies to keep":"Choose a policy to adopt"),a.presidentRejectedVeto&&l.a.createElement("p",null,"The ",y.presidentTitle," rejected your veto. Choose a policy to enact"))),l.a.createElement(B,{policies:a.policyChoices,onPolicyClick:function(e){return function(e){var a=Object(d.a)(u,(function(a){a[e]=!a[e]}));h(a)}(e)},chosen:u}),l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col"},l.a.createElement("button",{type:"button",className:"btn btn-primary mt-3",onClick:function(){v().length===o.length-1&&function(){var e=v(),t=o.filter((function(e,a){return!u[a]}))[0],n=Object(d.a)(a,(function(n){if(n.discards.push(t),1===e.length){var l=e[0],r=S(l),c="A new policy has been chosen: ".concat(r);n.enactedPolicies.push(l),n.policyChoices=[],n.events.push(c),n.presidentHasChosen=!1,n.governmentApproved=!1,n.chancellorHasVetoed=!1,n.presidentRejectedVeto=!1,n.government={president:"",chancellor:""},n.lastPresident=a.government.president,n.lastChancellor=a.government.chancellor}else n.presidentHasChosen=!0,n.policyChoices=e}));w(r,n),h(c())}()}},"Confirm")),5===E.fascist&&b===y.chancellorTitle&&!a.presidentRejectedVeto&&l.a.createElement("div",{className:"col"},l.a.createElement("button",{type:"button",className:"btn btn-danger",onClick:function(){f()}},"Veto")))))},Y=t(30),U=t.n(Y),W=t(31),M=t.n(W),K=t(32),q=t.n(K),X=t(33),Q=t.n(X),Z=t(34),$=t.n(Z),_=t(35),ee=t.n(_);function ae(e){var a=e.img;return l.a.createElement("div",{className:"col-2 col-md-1"},l.a.createElement("div",{className:"card py-2 policy-space"},l.a.createElement("img",{alt:"policy card",src:a})))}var te=function(e){var a,t=e.game,n=k(t),r=y.blueTeam,c=y.redTeam,o=y.redTeamLeader,i=T(t);return 6===n.fascist&&(a=l.a.createElement("h1",null,Object(p.capitalize)(c),"s Win with 6 Policies!")),5===n.liberal&&(a=l.a.createElement("h1",null,Object(p.capitalize)(r),"s Win with 5 Policies!")),n.fascist>=3&&t.governmentApproved&&j(t)&&(a=l.a.createElement("h1",null,Object(p.capitalize)(c),"s win Because ",Object(p.capitalize)(o)," is Chancellor!")),i?l.a.createElement("div",{className:"mt-3"},a):l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{className:"row mt-3"},l.a.createElement("div",{className:"col"},"Policies Left in Deck: ",t.policies.length),l.a.createElement("div",{className:"col"},"Discarded: ",t.discards.length," ")),i&&a,l.a.createElement("div",{className:"row mt-3"},Array(n.liberal).fill(!0).map((function(e,a){return l.a.createElement(ae,{key:"libs-en-".concat(a),img:M.a})})),Array(4-n.liberal).fill(!0).map((function(e,a){return l.a.createElement(ae,{key:"libs-en-".concat(a),img:U.a})})),l.a.createElement(ae,{img:q.a})),l.a.createElement("div",{className:"row mt-4"},Array(n.fascist).fill(!0).map((function(e,a){return l.a.createElement(ae,{key:"fasc-en-".concat(a),img:$.a})})),Array(5-n.fascist).fill(!0).map((function(e,a){return l.a.createElement(ae,{key:"fasc-".concat(a),img:Q.a})})),l.a.createElement(ae,{img:ee.a})))};var ne=function(e){var a=e.game,t=e.gameRef,r=e.playerName,c=void 0===r?"":r,o=Object(n.useState)(!1),i=Object(m.a)(o,2),s=i[0],u=i[1],p=Object(n.useState)(!1),h=Object(m.a)(p,2),f=h[0],v=h[1],b=Object(n.useState)(!0),g=Object(m.a)(b,2),E=g[0],y=g[1],k=Object(n.useState)(null),N=Object(m.a)(k,2),j=N[0],C=N[1];if(!a.started)return null;var T=function(e){e&&(w(t,j),f&&y(!1)),C(null),v(!1),u(!1)};return E?l.a.createElement(l.a.Fragment,null,s?l.a.createElement("div",{className:"row mt-3"},l.a.createElement("div",{className:"col-4 col-md-3"},l.a.createElement("button",{className:"btn btn-danger mr-3",onClick:function(){T(!0)}},"Confirm"),l.a.createElement("button",{className:"btn btn-info",onClick:function(){T(!1)}},"Cancel"))):l.a.createElement("div",{className:"row mt-3"},l.a.createElement("div",{className:"col-6 col-md-3"},l.a.createElement("button",{className:"btn btn-warning",onClick:function(){!function(){var e=Object(d.a)(a,(function(e){var t=a.policies;0===a.policies.length&&(t=O(a),e.discards=[]);var n=t[0],l=S(n),r="Government in chaos! New policy enacted: ".concat(l);e.policies=t.slice(1),e.enactedPolicies.push(n),e.events.push(r)}));u(!0),C(e)}()}},"Enact Top Policy")),l.a.createElement("div",{className:"col-6 col-md-3"},l.a.createElement("button",{className:"btn btn-warning",onClick:function(){var e=Object(d.a)(a,(function(e){var t=a.policies;a.policies.length<3&&(t=O(a),e.discards=[]);var n="".concat(c," viewed the top policies");e.policies=t,e.events.push(n)}));u(!0),v(!0),C(e)}},"View Top Policies")),l.a.createElement("div",{className:"col-6 col-md-3"},l.a.createElement("button",{className:"btn btn-warning",onClick:function(){var e=Object(d.a)(a,(function(e){e.presidentShouldInvestigate=!0}));u(!0),C(e)}},"Allow Investigation")),l.a.createElement("div",{className:"col-6 col-md-3"},l.a.createElement("button",{className:"btn btn-warning",onClick:function(){var e=Object(d.a)(a,(function(e){e.gameOver=!0}));u(!0),C(e)}},"End Game")))):l.a.createElement(B,{onPolicyClick:function(){y(!0)},policies:a.policies.slice(0,3)})};var le=function(e){var a=e.game,t=Object(n.useState)(!1),r=Object(m.a)(t,2),c=r[0],o=r[1],i=function(){o(!1)},s=a.players.length,d=y.blueTeam,u=y.redTeam,h=y.redTeamLeader;return l.a.createElement(l.a.Fragment,null,l.a.createElement("button",{className:"btn btn-primary ml-3",onClick:function(){return o(!0)}},"Show Rules"),l.a.createElement(F.a,{size:"lg",show:c,onHide:i},l.a.createElement(F.a.Header,{closeButton:!0},l.a.createElement(F.a.Title,null,"Rules for ",s," players ")),l.a.createElement(F.a.Body,null,l.a.createElement("ul",null,s<=6&&l.a.createElement(l.a.Fragment,null,l.a.createElement("li",null,"Two players (including ",h,") are ",u,"s"),l.a.createElement("li",null,Object(p.capitalize)(h)," knows who the other ",u," is"),l.a.createElement("li",null,"After the 3rd ",u," policy is enacted, the ",y.presidentTitle," will view the top three policy cards, then put them back without changing the order")),s>=7&&l.a.createElement(l.a.Fragment,null,s<9?l.a.createElement("li",null,"Three players (including ",h,") are ",u,"s"):l.a.createElement("li",null,"Four players (including ",h,") are ",u,"s"),l.a.createElement("li",null,Object(p.capitalize)(h)," doesn't know who the other ",u,"s are"),s>=9&&l.a.createElement("li",null,"After the 1st ",u," policy is enacted, the ",y.presidentTitle," ","investigates a player's team membership"),l.a.createElement("li",null,"After the 2nd ",u," policy is enacted, the ",y.presidentTitle," ","investigates a player's team membership"),l.a.createElement("li",null,"After the 3nd ",u," policy is enacted, the ",y.presidentTitle," chooses the next ",y.presidentTitle," (this is a special session, the order of succession reverts back to normal afterwards)")),l.a.createElement("li",null,"After the 4th ",u," policy is enacted, the ",y.presidentTitle," must eliminate a player"),l.a.createElement("li",null,"After the 5th ",u," policy is enacted, the ",y.presidentTitle," must eliminate a player, and the veto power is unlocked"),l.a.createElement("li",null,"The policy deck contains 11 ",u," and 6 ",d," policies"),l.a.createElement("li",null,"After three failed attempts to form a government, the top policy card from the deck is automatically enacted. No special events are triggered by this policy."))),l.a.createElement(F.a.Footer,null,l.a.createElement(z.a,{variant:"secondary",onClick:i},"Close"))))},re=y.redTeamLeader;var ce=function(e){var a=e.game,t=e.gameRef,r=e.hosting,c=void 0!==r&&r,o=Object(n.useState)(e.name||""),i=Object(m.a)(o,2),s=i[0],u=(i[1],Object(n.useState)(null)),h=Object(m.a)(u,2),f=h[0],v=h[1],b=Object(n.useState)(null),E=Object(m.a)(b,2),k=E[0],N=E[1],j=Object(n.useState)(!1),C=Object(m.a)(j,2),S=C[0],R=C[1],G=Object(n.useState)(null),V=Object(m.a)(G,2),H=V[0],F=V[1],z=function(){var e,n,l=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];f&&k?(l?(e="New government approved. ".concat(y.presidentTitle,": ").concat(f,", ").concat(y.chancellorTitle,": ").concat(k),n=Object(d.a)(a,(function(t){var n=a.policies;a.policies<3&&(n=O(a),t.discards=[]),t.government={president:f,chancellor:k},t.policyChoices=n.slice(0,3),t.policies=n.slice(3),t.events.push(e),t.presidentHasChosen=!1,t.presidentRejectedVeto=!1,t.chancellorHasVetoed=!1,t.governmentApproved=!0}))):(e="Government rejected. ".concat(y.presidentTitle,": ").concat(f,", ").concat(y.chancellorTitle,": ").concat(k),v(null),N(null),n=Object(d.a)(a,(function(a){a.events.push(e)}))),w(t,n)):console.log("set pres & chan")},B=function(e){if(f===e||k===e)return f===e?(v(null),void N(e)):void(k!==e||N(null));v(e)};if(!a.started)return l.a.createElement("div",{className:"container"},l.a.createElement(x,{game:a,playerName:s,onPlayerClick:B}),c&&l.a.createElement("div",{className:"row mt-3"},l.a.createElement("div",{className:"col"},l.a.createElement("button",{className:"btn btn-primary",onClick:function(){if(a.players.length<5)console.log("Need more players");else{var e=function(e){var a=e.players,t=Math.ceil(.5+a.length/2),n=Array(t).fill("blue");for(n.push("redLeader");n.length<a.length;)n.push("red");var l=Object(p.shuffle)(n),r={};return a.forEach((function(e,a){r[e]=l[a]})),r}(a),n=Object(d.a)(a,(function(a){a.roles=e,a.policies=function(){var e=Array(6).fill("BLUE"),a=Array(11).fill("RED"),t=[].concat(Object(g.a)(e),Object(g.a)(a));return Object(p.shuffle)(t)}(),a.started=!0,a.events.push("Game has started")}));w(t,n)}}},"Start Game"))),l.a.createElement("hr",null),l.a.createElement(A,{game:a}));var D=Object(p.get)(a,"lastPresident")===s,Y=T(a);return S?l.a.createElement(L,{game:a,playerName:H,handleOkay:function(){console.log("reveal dismissed!"),R(!1),F(!1)}}):a.presidentShouldInvestigate&&D?l.a.createElement(l.a.Fragment,null,l.a.createElement(x,{headline:"Choose a player to investigate",game:a,playerName:s,onPlayerClick:function(e){F(e),R(!0);var n=Object(d.a)(a,(function(a){a.events.push("".concat(s," investigated ").concat(e,"'s membership")),a.presidentShouldInvestigate=!1}));w(t,n)}})):l.a.createElement("div",{className:"container"},l.a.createElement("h1",{className:"headline text-center mb-3"},"Secret ",Object(p.capitalize)(re)),l.a.createElement(I,{game:a,playerName:s}),l.a.createElement(le,{game:a}),l.a.createElement(te,{game:a}),l.a.createElement("div",{className:"row mt-3"},l.a.createElement("div",{className:"col"},l.a.createElement("p",null,"Your name:"," ",{name:s}))),l.a.createElement(J,{game:a,playerName:s,gameRef:t}),l.a.createElement(x,{game:a,playerName:s,onPlayerClick:B,showRoles:Y}),l.a.createElement(P,{game:a,president:f,chancellor:k,showPotentialGovernment:c}),l.a.createElement("div",{className:"row mt-3"},!a.governmentApproved&&c&&l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{className:"col-4 col-md-3"},l.a.createElement("button",{className:"btn btn-secondary",onClick:z},"Approve Government")),l.a.createElement("div",{className:"col-4 col-md-3"},l.a.createElement("button",{className:"btn btn-secondary",onClick:function(){z(!1)}},"Reject Government")))),c&&l.a.createElement(ne,{game:a,gameRef:t}),l.a.createElement("hr",null),l.a.createElement(A,{game:a,show:6}))},oe=y.redTeamLeader,ie={players:[],roles:{},started:!1,host:null,policies:[],discards:[],government:{president:null,chancellor:null},governmentApproved:!1,events:[],presidentHasChosen:!1,policyChoices:[],enactedPolicies:[],gameOver:!1,presidentShouldInvestigate:!1,presidentShouldKill:!1,vetoAvailable:!1,chancellorHasVetoed:!1,presidentRejectedVeto:!1,lastPresident:null,lastChancellor:null};var se=function(e){var a=localStorage.getItem("playerName")||"",t=Object(n.useState)(e.game||ie),r=Object(m.a)(t,2),c=r[0],o=r[1],v=Object(n.useState)(localStorage.getItem("gameCode")||""),g=Object(m.a)(v,2),E=g[0],y=g[1],k=Object(n.useState)(e.gameRef||null),N=Object(m.a)(k,2),j=N[0],O=N[1],C=Object(n.useState)(a),T=Object(m.a)(C,2),S=T[0],x=T[1],P=Object(n.useState)(!1),A=Object(m.a)(P,2),R=A[0],G=A[1],V=Object(n.useState)(!1),H=Object(m.a)(V,2),F=H[0],z=H[1],I=Object(h.c)(),L=Object(m.a)(I,2),B=(L[0],L[1]),D=function(){var e=Object(s.a)(i.a.mark((function e(a){var t;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a.preventDefault(),localStorage.setItem("gameCode",E),console.log("hosting!",E),G(!0),e.next=6,b.collection("hgames").doc(E);case 6:t=e.sent,O(t),t.onSnapshot((function(e){var a=e.data();o(a)})),t.update({host:S,lastUpdate:f.firestore.FieldValue.serverTimestamp()});case 10:case"end":return e.stop()}}),e)})));return function(a){return e.apply(this,arguments)}}(),J=function(){var e=Object(s.a)(i.a.mark((function e(){var a,t,n,l;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("create game!"),a=(r=u)[Object(p.random)(0,r.length-1)],y(a),t="Game created. Code: ".concat(a),localStorage.setItem("gameCode",a),n=Object(d.a)(c,(function(e){e.code=a,e.host=S,e.events.push(t)})),e.next=8,b.collection("hgames").doc(a);case 8:l=e.sent,O(l),l.onSnapshot((function(e){o(e.data())})),w(l,n),G(!0);case 13:case"end":return e.stop()}var r}),e)})));return function(){return e.apply(this,arguments)}}();return c.started||c.code?l.a.createElement(ce,{game:c,gameRef:j,name:S,hosting:R}):l.a.createElement("div",{className:"container"},l.a.createElement("h2",{className:"headline text-center"},"Secret ",Object(p.capitalize)(oe)),l.a.createElement("div",{className:"row mt-3"},l.a.createElement("div",{className:"col-3"},"Take Over: "),l.a.createElement("div",{className:"col"},l.a.createElement("form",{onSubmit:D},l.a.createElement("input",{value:E,onChange:function(e){y(e.target.value)}}),l.a.createElement("input",{className:"btn btn-primary ml-3",type:"submit",value:"GO"})))),l.a.createElement("div",{className:"row mt-3"},l.a.createElement("div",{className:"col-3"},"Join: "),l.a.createElement("div",{className:"col"},l.a.createElement("form",{onSubmit:function(e){e.preventDefault(),B("/g/".concat(E))}},l.a.createElement("input",{value:E,onChange:function(e){y(e.target.value)}}),l.a.createElement("input",{className:"btn btn-primary ml-3",type:"submit",value:"GO"})))),l.a.createElement("div",{className:"row mt-3"},l.a.createElement("div",{className:"col-3"},"Create:"),l.a.createElement("div",{className:"col"},F?l.a.createElement(l.a.Fragment,null,l.a.createElement("p",null,"Your name: ",S),l.a.createElement("button",{onClick:J},"Create Game")):l.a.createElement("form",{onSubmit:function(e){e.preventDefault(),z(!0);var a=Object(d.a)(c,(function(e){e.players.push(S)}));o(a)}},l.a.createElement("input",{value:S,onChange:function(e){x(e.target.value)}}),l.a.createElement("input",{className:"btn btn-primary ml-3",type:"submit",value:"GO"})))))};var me=function(e){var a=Object(n.useState)(""),t=Object(m.a)(a,2),r=t[0],c=t[1],o=Object(n.useState)(null),u=Object(m.a)(o,2),h=u[0],f=u[1],v=Object(n.useState)(null),g=Object(m.a)(v,2),E=g[0],y=g[1],k=Object(p.get)(e,"params.code",null),N=Object(n.useState)(!1),j=Object(m.a)(N,2),O=j[0],C=j[1];return Object(n.useEffect)((function(){null!==k&&function(){var e=Object(s.a)(i.a.mark((function e(){var a;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,b.collection("hgames").doc(k);case 2:a=e.sent,y(a),a.onSnapshot((function(e){var a=e.data();f(a)}));case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()();var e=localStorage.getItem("playerName");null!==e&&c(e)}),[k]),null===h?null:O&&h.players.includes(r)?l.a.createElement(ce,{game:h,gameRef:E,name:r}):l.a.createElement("div",{className:"container"},l.a.createElement("h2",null,"Confirm your name"),O?l.a.createElement("div",{className:"row mt-3"},l.a.createElement("p",null,"You are: ",r)):l.a.createElement("form",{onSubmit:function(e){if(e.preventDefault(),C(!0),localStorage.setItem("playerName",r),h.players.includes(r))console.log("Name already registered");else if(h.started)console.log("Game already started!");else{var a=Object(d.a)(h,(function(e){e.players.push(r)}));w(E,a)}}},l.a.createElement("input",{value:r,onChange:function(e){c(e.target.value)}}),l.a.createElement("input",{type:"submit"})))};var de=function(){return l.a.createElement("div",null,l.a.createElement(h.b,null,l.a.createElement(h.a,{exact:!0,path:"/",component:se}),l.a.createElement(h.a,{path:"/g/:code",component:me})))};c.a.render(l.a.createElement(l.a.StrictMode,null,l.a.createElement(de,null)),document.getElementById("root"))}},[[37,1,2]]]);
//# sourceMappingURL=main.45d4387b.chunk.js.map