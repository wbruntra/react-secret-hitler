(this.webpackJsonpshitler=this.webpackJsonpshitler||[]).push([[0],{22:function(e,a,t){e.exports=t.p+"static/media/Liberal.5179a2ef.JPG"},23:function(e,a,t){e.exports=t.p+"static/media/Fascist.ed402502.JPG"},37:function(e){e.exports=JSON.parse('["abed","abel","able","ache","act","age","aged","aggo","ago","air","ale","alla","also","alyn","alys","arch","aren","areo","arm","arms","army","arry","arya","arys","ash","asha","ask","asks","ate","atop","aunt","away","axe","axes","aye","babe","baby","bad","bag","bald","band","bank","bar","bard","bare","bark","bars","base","bath","bay","bear","beat","bed","beds","beef","beer","beg","bell","belt","ben","bend","bent","best","bet","bid","big","bind","bird","bit","bite","bits","blew","blow","blue","boar","boat","body","boil","bold","bolt","bone","bony","book","boom","boot","bore","born","both","bow","bowl","bows","box","boy","boys","bran","brax","brow","bull","burn","bury","butt","buy","cage","call","calm","came","camp","cape","care","cart","case","cask","cast","cat","cats","cave","cell","chin","city","clad","claw","cock","cog","coin","cold","come","cook","cool","corn","cost","cow","crag","crew","crow","cry","cup","cups","cut","cuts","dais","damn","damp","dany","dare","dark","dawn","day","days","dead","deaf","deal","dear","debt","deck","deep","deer","den","deny","didn","die","died","dies","dim","dirk","dirt","dish","does","dog","dogs","dome","don","done","doom","door","drag","draw","drew","drop","drum","dry","duck","due","dug","dull","dung","dusk","dust","duty","duur","each","ear","ears","ease","east","easy","eat","edd","edge","eel","egg","eggs","elia","elk","else","end","ends","erik","even","ever","evil","eye","eyed","eyes","face","fail","fair","fall","far","fast","fat","fate","fear","fed","feed","feel","feet","fell","felt","few","fill","find","fine","fire","fish","fist","fit","five","flap","flat","flea","fled","flee","flew","flow","fly","foe","foes","fog","folk","fond","food","fool","foot","ford","fork","form","foul","four","fox","free","frey","frog","full","fur","furs","fury","game","garb","gash","gasp","gate","gave","gaze","gets","ghar","ghis","gift","girl","give","glad","glow","goat","god","gods","goes","gold","gone","good","got","gown","grab","grew","grey","grim","grin","grip","grow","gust","gut","hadn","hair","hal","half","hall","halt","ham","hand","hang","hard","harm","harp","has","hat","hate","hawk","head","heal","hear","heat","heed","heel","heh","heir","held","hell","helm","help","hero","hers","hid","hide","high","hill","hilt","hint","hip","hips","hire","hit","hoat","hobb","hold","hole","holy","home","hood","hook","hope","horn","host","hot","hour","howl","huge","hull","hung","hunt","hurt","hyle","ice","icy","idea","ill","ilyn","imp","inch","ink","inn","iron","irri","isle","isn","jack","jade","jape","jarl","jars","jaw","jaws","jest","joff","join","jon","jory","joy","keep","kept","key","keys","khal","kick","kill","kin","kind","king","kiss","knee","knew","kyra","lace","lack","lad","lads","lady","laid","lake","lamb","lame","lamp","land","lap","lark","lash","last","late","law","laws","lay","lazy","lead","leaf","lean","led","left","leg","legs","lem","leo","less","lest","let","liar","lick","lie","lied","lies","life","lift","limb","limp","line","lion","lip","lips","list","lit","live","lock","log","logs","long","look","lord","lose","loss","lost","lot","loud","love","low","luck","lust","lyn","lys","lysa","mace","mad","made","maid","mail","main","make","male","mane","many","map","maps","mare","mark","marq","mask","mast","may","maz","mead","meal","mean","meat","meet","melt","men","mere","met","mile","milk","mill","mind","mine","miss","mist","moat","mob","mock","mole","mood","moon","mord","mors","moss","most","move","much","mud","mule","must","mya","myr","name","nan","near","neck","ned","need","nest","net","new","news","next","nice","nine","nod","none","nor","nose","note","noye","nute","nym","oaf","oak","oars","oath","obey","odd","off","oft","oil","old","once","ones","onto","onyx","open","osha","our","ours","owe","owen","own","pace","pack","page","paid","pail","pain","pair","pale","palm","part","pass","past","pate","path","paul","pay","pays","peck","pet","pia","pick","pie","pies","pig","pigs","pile","pine","pink","piss","pit","pits","pity","plan","play","pod","pole","pool","poor","pork","port","pot","pots","pour","pox","pray","pree","prey","prow","pull","pup","pure","push","put","pyat","pyke","pyp","pyre","qarl","raff","rage","rags","rail","rain","ralf","ram","ran","rang","rank","rare","rat","rats","raw","read","real","rear","red","reed","reek","rest","ribs","rich","rid","ride","ring","rip","ripe","rise","risk","road","roar","robb","robe","rock","rode","roll","roof","room","root","rope","rose","rot","row","rows","ruby","ruin","rule","run","runs","rush","rust","saan","sack","sad","safe","sail","sake","salt","sam","same","sand","sang","sank","sat","save","saw","say","says","scar","sea","seal","seas","seat","seed","seek","seem","seen","sees","sell","send","sent","sept","ser","set","sewn","shae","shed","ship","shot","show","shut","shy","sick","side","sign","silk","sin","sing","sins","sip","sire","sit","sits","six","size","skin","sky","slap","slay","slew","slid","slim","slip","slit","slow","sly","snow","soft","soil","sold","son","song","sons","soon","sore","sort","soul","soup","sour","sow","spat","spit","spot","spun","stab","stag","star","stay","step","stew","stir","stop","styr","such","suck","suit","sun","sunk","sure","swam","sway","swim","tail","take","tale","talk","tall","task","tear","tell","ten","tend","tent","than","thin","tide","tied","till","tiny","toad","toe","toes","told","tom","tone","too","took","top","tore","torn","town","trap","tree","tris","true","try","tub","turn","twin","ugly","upon","use","used","vaes","vain","val","vale","van","vast","veil","vest","view","vile","vow","vows","waif","wait","wake","walk","wall","want","war","ward","warg","warm","warn","wars","wary","wash","wasn","wave","wax","way","wayn","ways","weak","wear","wed","weep","went","wept","west","wet","wex","whip","whom","why","wide","wife","wild","win","wind","wine","wing","wise","wish","wit","wits","woke","wolf","womb","won","wood","wool","word","wore","work","worm","worn","wun","wyk","xaro","xho","yard","year","yes","yet","yohn"]')},38:function(e,a,t){e.exports=t.p+"static/media/liberal-card-space.f5c7314a.JPG"},39:function(e,a,t){e.exports=t.p+"static/media/liberal-card-enact.5179a2ef.JPG"},40:function(e,a,t){e.exports=t.p+"static/media/liberal-card-win.de286c5f.JPG"},41:function(e,a,t){e.exports=t.p+"static/media/fascist-card-space.61fe29af.JPG"},42:function(e,a,t){e.exports=t.p+"static/media/fascist-card-enact.ed402502.JPG"},43:function(e,a,t){e.exports=t.p+"static/media/fascist-card-win.84f89324.JPG"},46:function(e,a,t){e.exports=t(65)},51:function(e,a,t){},52:function(e,a,t){},65:function(e,a,t){"use strict";t.r(a);var n=t(0),l=t.n(n),r=t(14),c=t.n(r),o=(t(51),t(52),t(29)),i=t(5),s=t(15),m=t.n(s),d=t(18),u=t(2),p=t(6),h=t(37),f=t(4),v=t(16),b=(t(28),{apiKey:"AIzaSyAvSp91vcvkgt9RYafRIgY8noH4NSX0P0g",authDomain:"isthisprime.firebaseapp.com",databaseURL:"https://isthisprime.firebaseio.com",projectId:"isthisprime",storageBucket:"isthisprime.appspot.com",messagingSenderId:"522572340456",appId:"1:522572340456:web:3f0afa40b9cb7d8550bd5d"});t(58);v.initializeApp(b);var g=v.firestore(),E=t(13),y=t(45),w={blueTeam:"Order of Phoenix",redTeam:"Death-Eater",redTeamLeader:"Voldemort",presidentTitle:"Minister for Magic",chancellorTitle:"Chief Warlock",RED:"Wizard Purity",BLUE:"Muggle Protection"},k=function(e,a){e.set(Object(y.a)({},a,{lastUpdate:v.firestore.FieldValue.serverTimestamp()}))},N=function(e){var a=e.enactedPolicies.filter((function(e){return"BLUE"===e}));return{liberal:a.length,fascist:e.enactedPolicies.length-a.length}},j=function(e){for(var a=e.roles,t=e.players,n=0;n<t.length;n++)if("redLeader"===a[t[n]])return t[n]},O=function(e){var a=j(e);return Object(f.get)(e,"government.chancellor")===a},C=function(e){return Object(f.shuffle)([].concat(Object(E.a)(e.discards),Object(E.a)(e.policies)))},T=function(e){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:w,t=a.blueTeam,n=a.redTeam,l=a.redTeamLeader;return"blue"===e?t:"red"===e?n:"redLeader"===e?l:void 0},S=function(e){if(e.gameOver)return!0;var a=N(e);return 6===a.fascist||(5===a.liberal||!!(a.fascist>=3&&e.governmentApproved&&O(e)))},P=function(e){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:w;return a[e]};var x=function(e){var a=e.game,t=e.playerName,n=e.headline,r=void 0===n?"Players":n,c=e.onPlayerClick,o=void 0===c?function(){}:c,i=e.showRoles,s=void 0!==i&&i;if(!a)return null;var m=a.government,d=m.president,u=m.chancellor;return l.a.createElement("div",{className:"section mt-3"},l.a.createElement("h2",{className:"text-center"},r),l.a.createElement("div",{className:"row"},a.players.map((function(e,n){var r=T(a.roles[e]);return l.a.createElement("div",{className:"col-4 col-md-3 my-3 player-card",key:"player-".concat(n)},l.a.createElement("div",{className:"card h-100"},l.a.createElement("div",{className:"py-3 text-center ".concat(e===d?"president":""," ").concat(e===u?"chancellor":""," "),onClick:function(){o(e)}},l.a.createElement("div",null,l.a.createElement("i",{className:"fas fa-user"})),l.a.createElement("p",null,e," ",e===t?"(you)":""),e===d&&l.a.createElement("p",null,w.presidentTitle),e===u&&l.a.createElement("p",null,w.chancellorTitle),s&&l.a.createElement("p",{className:"".concat("blue"===a.roles[e]?"blue":"red")},r))))}))))};var R=function(e){e.game;var a=e.showPotentialGovernment,t=void 0!==a&&a,n=e.president,r=void 0===n?"":n,c=e.chancellor,o=void 0===c?"":c;return t?l.a.createElement("div",{className:"row mt-3"},l.a.createElement("div",{className:"col-8"},l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-5"},"Proposed ",w.presidentTitle,":"),l.a.createElement("div",{className:"col-6"},r)),l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-5"},"Proposed ",w.chancellorTitle,":"),l.a.createElement("div",{className:"col-6"},o)))):null};var A=function(e){var a=e.game,t=e.show,n=void 0===t?0:t,r=a.events;if(0===r.length)return null;var c=n>0?r.slice(-1*n):Object(E.a)(r);return l.a.createElement(l.a.Fragment,null,l.a.createElement("h3",{className:"headline text-center"},"Events"),l.a.createElement("ul",{className:"list-group event-list"},c.map((function(e,a){return l.a.createElement("li",{className:"list-group-item",key:"event-".concat(a)},e)}))))},V=t(22),G=t.n(V),H=t(23),F=t.n(H),I=t(8),L=t(24);var z=function(e){var a=e.game,t=e.playerName,r=e.autoReveal,c=void 0!==r&&r,o=e.onHide,i=void 0===o?function(){}:o,s=Object(n.useState)(!0===c),m=Object(u.a)(s,2),d=m[0],p=m[1],h=function(){i(),p(!1)},v=a.roles,b=j(a),g=v[t],E=w.redTeam,y=w.redTeamLeader,k=T(g,w);return l.a.createElement(l.a.Fragment,null,l.a.createElement("button",{className:"btn btn-primary ml-3",onClick:function(){return p(!0)}},"Reveal Secret Role"),l.a.createElement(I.a,{show:d,onHide:h},l.a.createElement(I.a.Header,{closeButton:!0},l.a.createElement(I.a.Title,null,"Your Secret Role: ",k," ")),l.a.createElement(I.a.Body,null,l.a.createElement("div",{className:"row justify-content-center role-reveal"},l.a.createElement("div",{className:"col-3"},"blue"===g?l.a.createElement("img",{alt:"blue card",src:G.a}):l.a.createElement("img",{alt:"red card",src:F.a}))),("red"===g||g===y&&a.players.length<7)&&l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col"},l.a.createElement("p",null,Object(f.capitalize)(y)," is: ",b))),l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col"},l.a.createElement("p",null,"All ",E,"s: ",function(e){var a=e.roles;return Object(f.filter)(Object(f.map)(a,(function(e,a){return"blue"!==e?a:null})))}(a).join(", ")))))),l.a.createElement(I.a.Footer,null,l.a.createElement(L.a,{variant:"secondary",onClick:h},"Close"))))};var B=function(e){var a=e.game,t=e.playerName,n=e.handleOkay,r=function(e){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:w,t=a.blueTeam,n=a.redTeam;return"blue"===e?t:n}(a.roles[t]);return l.a.createElement("div",{className:"container mt-5"},l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-4 col-md-3"},l.a.createElement("div",{className:"card shadow p-3 text-center"},l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col"},"Player: ",t)),l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col"},"Role: ",r)),l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col"},l.a.createElement("button",{className:"btn btn-primary mt-4",onClick:n},"OK")))))))};var J=function(e){var a=e.policies,t=e.onPolicyClick,n=void 0===t?function(){}:t,r=e.chosen,c=void 0===r?[]:r,o=e.withChecks,i=void 0===o||o;return l.a.createElement("div",{className:"row justify-content-center"},a.map((function(e,a){var t="BLUE"===e?G.a:F.a;return l.a.createElement("div",{key:"policy-".concat(a),className:"col-2 text-center"},l.a.createElement("div",{className:"card py-3 policy-space",onClick:function(){return n(a)}},l.a.createElement("img",{className:"card-img-top",src:t,alt:"policy choice"}),i&&l.a.createElement("div",{className:"mt-2"},c[a]?l.a.createElement("i",{className:"fas fa-check green"}):l.a.createElement("i",{className:"fas fa-times red"}))))})))};var D=function(e){var a=e.children,t=e.title,r=void 0===t?"Info":t,c=e.autoReveal,o=void 0===c||c,i=e.onHide,s=void 0===i?function(){}:i,m=Object(n.useState)(!0===o),d=Object(u.a)(m,2),p=d[0];return d[1],l.a.createElement(l.a.Fragment,null,l.a.createElement(I.a,{show:p,onHide:function(){s()}},l.a.createElement(I.a.Header,null,l.a.createElement(I.a.Title,null,r)),l.a.createElement(I.a.Body,null,a)))};var U=function(e){var a=e.game,t=e.playerName,r=e.gameRef,c=function(){return Array(3).fill(!1)},o=a.policyChoices,i=Object(n.useState)(c()),s=Object(u.a)(i,2),m=s[0],d=s[1],h=function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],t=Object(p.a)(a,(function(t){var n,l;(t.presidentHasChosen=!1,e)?a.chancellorHasVetoed?((l=t.discards).push.apply(l,Object(E.a)(a.policyChoices)),t.policyChoices=[],n="".concat(w.presidentTitle," has agreed to veto"),t.governmentApproved=!1,t.chancellorHasVetoed=!1,t.presidentHasChosen=!1,t.government={president:"",chancellor:""}):(n="".concat(w.chancellorTitle," has proposed a veto"),t.chancellorHasVetoed=!0):(t.presidentRejectedVeto=!0,n="".concat(w.presidentTitle," has rejected the veto"));t.events.push(n)}));console.log(t),k(r,t)},v=function(){return o.filter((function(e,a){return m[a]}))};if(!a.governmentApproved)return null;var b=Object(f.get)(a,"government.president")===t?w.presidentTitle:Object(f.get)(a,"government.chancellor")===t?w.chancellorTitle:null;if(!b)return l.a.createElement(D,{title:"Government in Session"},l.a.createElement("p",null,"Waiting for government to choose a new policy..."));if(b===w.presidentTitle&&!a.chancellorHasVetoed&&2===a.policyChoices.length)return l.a.createElement(D,{title:"Government in Session"},l.a.createElement("p",null,"Waiting for ",w.chancellorTitle));if(b===w.presidentTitle&&a.presidentRejectedVeto)return l.a.createElement(D,{title:"Government in Session"},l.a.createElement("p",null,"Rejected veto. Waiting for ",w.chancellorTitle));if(b===w.chancellorTitle&&a.chancellorHasVetoed&&!a.presidentRejectedVeto)return"Veto proposed. Waiting for ".concat(w.presidentTitle," to decide.");if(b===w.chancellorTitle&&!a.chancellorHasVetoed&&3===a.policyChoices.length)return l.a.createElement(D,{title:"Government in Session"},l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col"},l.a.createElement("p",null,"You are the ",b),l.a.createElement("p",null,"Waiting for ",w.presidentTitle," to choose"))));var g=N(a);return b===w.presidentTitle&&a.chancellorHasVetoed?l.a.createElement(l.a.Fragment,null,l.a.createElement(D,{title:"Veto Proposed"},l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col"},l.a.createElement("p",null,Object(f.capitalize)(w.chancellorTitle)," wants to veto these policies. Agree?"))),l.a.createElement(J,{policies:a.policyChoices,onPolicyClick:function(){},chosen:m}),l.a.createElement("div",{className:"row mt-3"},l.a.createElement("div",{className:"col-4"},l.a.createElement("button",{type:"button",className:"btn btn-primary",onClick:function(){h()}},"Agree to Veto")),l.a.createElement("div",{className:"col-4"},l.a.createElement("button",{type:"button",className:"btn btn-warning",onClick:function(){h(!1)}},"Reject Veto"))))):l.a.createElement(l.a.Fragment,null,l.a.createElement(D,{title:"Government in Session"},l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col"},l.a.createElement("p",null,"You are the ",b,"."," ",b===w.presidentTitle?"Choose 2 policies to keep":"Choose a policy to adopt"),a.presidentRejectedVeto&&l.a.createElement("p",null,"The ",w.presidentTitle," rejected your veto. Choose a policy to enact"))),l.a.createElement(J,{policies:a.policyChoices,onPolicyClick:function(e){return function(e){var a=Object(p.a)(m,(function(a){a[e]=!a[e]}));d(a)}(e)},chosen:m}),l.a.createElement("div",{className:"row mt-3"},l.a.createElement("div",{className:"col"},l.a.createElement("button",{type:"button",className:"btn btn-primary",onClick:function(){v().length===o.length-1&&function(){var e=v(),t=o.filter((function(e,a){return!m[a]}))[0],n=Object(p.a)(a,(function(n){if(n.discards.push(t),1===e.length){var l=e[0],r=P(l),c="A new policy has been chosen: ".concat(r);n.enactedPolicies.push(l),n.policyChoices=[],n.events.push(c),n.presidentHasChosen=!1,n.governmentApproved=!1,n.chancellorHasVetoed=!1,n.presidentRejectedVeto=!1,n.government={president:"",chancellor:""},n.lastPresident=a.government.president,n.lastChancellor=a.government.chancellor}else n.presidentHasChosen=!0,n.policyChoices=e}));k(r,n),d(c())}()}},"Confirm")),5===g.fascist&&b===w.chancellorTitle&&!a.presidentRejectedVeto&&l.a.createElement("div",{className:"col"},l.a.createElement("button",{type:"button",className:"btn btn-danger",onClick:function(){h()}},"Veto")))))},W=t(38),Y=t.n(W),M=t(39),K=t.n(M),q=t(40),X=t.n(q),Q=t(41),Z=t.n(Q),$=t(42),_=t.n($),ee=t(43),ae=t.n(ee);function te(e){var a=e.img;return l.a.createElement("div",{className:"col-2 col-md-1"},l.a.createElement("div",{className:"card py-2 policy-space"},l.a.createElement("img",{alt:"policy card",src:a})))}var ne=function(e){var a,t=e.game,n=N(t),r=w.blueTeam,c=w.redTeam,o=w.redTeamLeader,i=S(t);return 6===n.fascist&&(a=l.a.createElement("h1",null,c," wins with 6 Policies!")),5===n.liberal&&(a=l.a.createElement("h1",null,r," wins with 5 Policies!")),n.fascist>=3&&t.governmentApproved&&O(t)&&(a=l.a.createElement("h1",null,c," wins because ",o," is ",w.chancellorTitle,"!")),i?l.a.createElement("div",{className:"mt-3"},a):l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{className:"row mt-3"},l.a.createElement("div",{className:"col"},"Policies Left in Deck: ",t.policies.length),l.a.createElement("div",{className:"col"},"Discarded: ",t.discards.length," ")),i&&a,l.a.createElement("div",{className:"row mt-3"},Array(n.liberal).fill(!0).map((function(e,a){return l.a.createElement(te,{key:"libs-en-".concat(a),img:K.a})})),Array(4-n.liberal).fill(!0).map((function(e,a){return l.a.createElement(te,{key:"libs-en-".concat(a),img:Y.a})})),l.a.createElement(te,{img:X.a})),l.a.createElement("div",{className:"row mt-4"},Array(n.fascist).fill(!0).map((function(e,a){return l.a.createElement(te,{key:"fasc-en-".concat(a),img:_.a})})),Array(5-n.fascist).fill(!0).map((function(e,a){return l.a.createElement(te,{key:"fasc-".concat(a),img:Z.a})})),l.a.createElement(te,{img:ae.a})))};var le=function(e){var a=e.game,t=e.gameRef,r=(e.playerName,e.hosting,Object(n.useState)(!1)),c=Object(u.a)(r,2),o=c[0],i=c[1],s=Object(n.useState)(!1),m=Object(u.a)(s,2),d=m[0],h=m[1],f=Object(n.useState)(!0),v=Object(u.a)(f,2),b=(v[0],v[1]),g=Object(n.useState)(null),E=Object(u.a)(g,2),y=E[0],w=E[1];if(!a.started)return null;var N=function(e){e&&(k(t,y),d&&b(!1)),w(null),h(!1),i(!1)};return l.a.createElement(l.a.Fragment,null,o?l.a.createElement("div",{className:"row mt-3"},l.a.createElement("div",{className:"col-4 col-md-3"},l.a.createElement("button",{className:"btn btn-danger mr-3",onClick:function(){N(!0)}},"Confirm"),l.a.createElement("button",{className:"btn btn-info",onClick:function(){N(!1)}},"Cancel"))):l.a.createElement("div",{className:"row mt-3"},l.a.createElement("div",{className:"col-6 col-md-3"},l.a.createElement("button",{className:"btn btn-warning",onClick:function(){!function(){var e=Object(p.a)(a,(function(e){var t=a.policies;0===a.policies.length&&(t=C(a),e.discards=[]);var n=t[0],l=P(n),r="Government in chaos! New policy enacted: ".concat(l);e.policies=t.slice(1),e.enactedPolicies.push(n),e.events.push(r)}));i(!0),w(e)}()}},"Enact Top Policy")),l.a.createElement("div",{className:"col-6 col-md-3"},l.a.createElement("button",{className:"btn btn-warning",onClick:function(){var e=Object(p.a)(a,(function(e){var t=a.policies;a.policies.length<3&&(t=C(a),e.discards=[]),e.presidentShouldViewPolicies=!0,e.policies=t}));i(!0),h(!0),w(e)}},"View Top Policies")),l.a.createElement("div",{className:"col-6 col-md-3"},l.a.createElement("button",{className:"btn btn-warning",onClick:function(){var e=Object(p.a)(a,(function(e){e.presidentShouldInvestigate=!0}));i(!0),w(e)}},"Allow Investigation")),l.a.createElement("div",{className:"col-6 col-md-3"},l.a.createElement("button",{className:"btn btn-warning",onClick:function(){var e=Object(p.a)(a,(function(e){e.gameOver=!0}));i(!0),w(e)}},"End Game"))))};var re=function(e){var a=e.game,t=Object(n.useState)(!1),r=Object(u.a)(t,2),c=r[0],o=r[1],i=function(){o(!1)},s=a.players.length,m=w.redTeam,d=w.redTeamLeader;return l.a.createElement(l.a.Fragment,null,l.a.createElement("button",{className:"btn btn-primary ml-3",onClick:function(){return o(!0)}},"Show Rules"),l.a.createElement(I.a,{size:"lg",show:c,onHide:i},l.a.createElement(I.a.Header,{closeButton:!0},l.a.createElement(I.a.Title,null,"Rules for ",s," players ")),l.a.createElement(I.a.Body,null,l.a.createElement("ul",null,s<=6&&l.a.createElement(l.a.Fragment,null,l.a.createElement("li",null,"Two players (including ",d,") are ",m,"s"),l.a.createElement("li",null,Object(f.capitalize)(d)," knows who the other ",m," is"),l.a.createElement("li",null,"After the 3rd ",m," policy is enacted, the ",w.presidentTitle," will view the top three policy cards, then put them back without changing the order")),s>=7&&l.a.createElement(l.a.Fragment,null,s<9?l.a.createElement("li",null,"Three players (including ",d,") are ",m,"s"):l.a.createElement("li",null,"Four players (including ",d,") are ",m,"s"),l.a.createElement("li",null,Object(f.capitalize)(d)," doesn't know who the other ",m,"s are"),s>=9&&l.a.createElement("li",null,"After the 1st ",m," policy is enacted, the ",w.presidentTitle," ","investigates a player's team membership"),l.a.createElement("li",null,"After the 2nd ",m," policy is enacted, the ",w.presidentTitle," ","investigates a player's team membership"),l.a.createElement("li",null,"After the 3nd ",m," policy is enacted, the ",w.presidentTitle," chooses the next ",w.presidentTitle," (this is a special session, the order of succession reverts back to normal afterwards)")),l.a.createElement("li",null,"After the 4th ",m," policy is enacted, the ",w.presidentTitle," must eliminate a player"),l.a.createElement("li",null,"After the 5th ",m," policy is enacted, the ",w.presidentTitle," must eliminate a player, and the veto power is unlocked"),l.a.createElement("li",null,"The policy deck contains 11 ",w.RED," and 6 ",w.BLUE," policies"),l.a.createElement("li",null,"After three failed attempts to form a government, the top policy card from the deck is automatically enacted. No special events are triggered by this policy."))),l.a.createElement(I.a.Footer,null,l.a.createElement(L.a,{variant:"secondary",onClick:i},"Close"))))},ce=w.redTeamLeader;var oe=function(e){var a=e.game,t=e.gameRef,r=e.hosting,c=void 0!==r&&r,o=Object(n.useState)(e.name||""),i=Object(u.a)(o,2),s=i[0],m=(i[1],Object(n.useState)(null)),d=Object(u.a)(m,2),h=d[0],v=d[1],b=Object(n.useState)(null),g=Object(u.a)(b,2),y=g[0],N=g[1],j=Object(n.useState)(!1),O=Object(u.a)(j,2),T=O[0],P=O[1],V=Object(n.useState)(null),G=Object(u.a)(V,2),H=G[0],F=G[1],I=function(){var e,n,l=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];h&&y?(l?(e="New government approved. ".concat(w.presidentTitle,": ").concat(h,", ").concat(w.chancellorTitle,": ").concat(y),n=Object(p.a)(a,(function(t){var n=a.policies;a.policies<3&&(n=C(a),t.discards=[]),t.government={president:h,chancellor:y},t.policyChoices=n.slice(0,3),t.policies=n.slice(3),t.events.push(e),t.presidentHasChosen=!1,t.presidentRejectedVeto=!1,t.chancellorHasVetoed=!1,t.governmentApproved=!0}))):(e="Government rejected. ".concat(w.presidentTitle,": ").concat(h,", ").concat(w.chancellorTitle,": ").concat(y),v(null),N(null),n=Object(p.a)(a,(function(a){a.events.push(e)}))),k(t,n)):console.log("set pres & chan")},L=function(e){if(h===e||y===e)return h===e?(v(null),void N(e)):void(y!==e||N(null));v(e)};if(!a.started)return l.a.createElement("div",{className:"container"},l.a.createElement(x,{game:a,playerName:s,onPlayerClick:L}),c&&l.a.createElement("div",{className:"row mt-3"},l.a.createElement("div",{className:"col"},l.a.createElement("button",{className:"btn btn-primary",onClick:function(){if(a.players.length<5)console.log("Need more players");else{var e=function(e){var a=e.players,t=Math.ceil(.5+a.length/2),n=Array(t).fill("blue");for(n.push("redLeader");n.length<a.length;)n.push("red");var l=Object(f.shuffle)(n),r={};return a.forEach((function(e,a){r[e]=l[a]})),r}(a),n=Object(p.a)(a,(function(a){a.roles=e,a.policies=function(){var e=Array(6).fill("BLUE"),a=Array(11).fill("RED"),t=[].concat(Object(E.a)(e),Object(E.a)(a));return Object(f.shuffle)(t)}(),a.started=!0,a.events.push("Game has started")}));k(t,n)}}},"Start Game"))),l.a.createElement("hr",null),l.a.createElement(A,{game:a}));var W=Object(f.get)(a,"lastPresident")===s,Y=S(a);return T?l.a.createElement(B,{game:a,playerName:H,handleOkay:function(){console.log("reveal dismissed!"),P(!1),F(!1)}}):a.presidentShouldInvestigate&&W?l.a.createElement(l.a.Fragment,null,l.a.createElement(x,{headline:"Choose a player to investigate",game:a,playerName:s,onPlayerClick:function(e){F(e),P(!0);var n=Object(p.a)(a,(function(a){a.events.push("".concat(s," investigated ").concat(e,"'s membership")),a.presidentShouldInvestigate=!1}));k(t,n)}})):l.a.createElement("div",{className:"container"},a.presidentShouldViewPolicies&&W&&l.a.createElement(D,{title:"Policy Preview",onHide:function(){var e=Object(p.a)(a,(function(e){e.events.push("".concat(s," viewed the top policies")),e.presidentShouldViewPolicies=!1}));k(t,e)}},l.a.createElement(J,{policies:a.policies.slice(0,3),withChecks:!1})),l.a.createElement("h1",{className:"headline text-center mb-3"},"Secret ",Object(f.capitalize)(ce)),l.a.createElement(z,{game:a,playerName:s}),l.a.createElement(re,{game:a}),l.a.createElement(ne,{game:a}),!1,l.a.createElement(U,{game:a,playerName:s,gameRef:t}),l.a.createElement(x,{game:a,playerName:s,onPlayerClick:L,showRoles:Y}),l.a.createElement(R,{game:a,president:h,chancellor:y,showPotentialGovernment:c}),l.a.createElement("div",{className:"row mt-3"},!a.governmentApproved&&c&&l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{className:"col-4 col-md-3"},l.a.createElement("button",{className:"btn btn-secondary",onClick:I},"Approve Government")),l.a.createElement("div",{className:"col-4 col-md-3"},l.a.createElement("button",{className:"btn btn-secondary",onClick:function(){I(!1)}},"Reject Government")))),c&&l.a.createElement(le,{game:a,gameRef:t,hosting:c}),l.a.createElement("hr",null),l.a.createElement(A,{game:a,show:6}))},ie={players:[],roles:{},started:!1,host:null,policies:[],discards:[],government:{president:null,chancellor:null},governmentApproved:!1,events:[],presidentHasChosen:!1,policyChoices:[],enactedPolicies:[],gameOver:!1,presidentShouldInvestigate:!1,presidentShouldKill:!1,presidentShouldViewPolicies:!1,vetoAvailable:!1,chancellorHasVetoed:!1,presidentRejectedVeto:!1,lastPresident:null,lastChancellor:null},se=w.redTeamLeader;var me=function(e){var a=localStorage.getItem("playerName")||"",t=Object(n.useState)(e.game||ie),r=Object(u.a)(t,2),c=r[0],o=r[1],s=Object(n.useState)(!1),b=Object(u.a)(s,2),E=b[0],y=b[1],w=Object(n.useState)(localStorage.getItem("gameCode")||""),N=Object(u.a)(w,2),j=N[0],O=N[1],C=Object(n.useState)(e.gameRef||null),T=Object(u.a)(C,2),S=T[0],P=T[1],x=Object(n.useState)(a),R=Object(u.a)(x,2),A=R[0],V=R[1],G=Object(n.useState)(!1),H=Object(u.a)(G,2),F=H[0],I=H[1],L=Object(n.useState)(!1),z=Object(u.a)(L,2),B=(z[0],z[1],Object(i.f)()),J=function(){var e=Object(d.a)(m.a.mark((function e(a){var t;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a.preventDefault(),localStorage.setItem("gameCode",j),console.log("hosting!",j),I(!0),e.next=6,g.collection("hgames").doc(j);case 6:t=e.sent,P(t),t.onSnapshot((function(e){var a=e.data();console.log(a),o(a)})),t.update({host:A,lastUpdate:v.firestore.FieldValue.serverTimestamp()});case 10:case"end":return e.stop()}}),e)})));return function(a){return e.apply(this,arguments)}}(),D=function(){var e=Object(d.a)(m.a.mark((function e(){var a,t,n,l;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=(r=h)[Object(f.random)(0,r.length-1)],O(a),t="Game created. Code: ".concat(a),localStorage.setItem("gameCode",a),n=Object(p.a)(c,(function(e){e.players.push(A),e.code=a,e.host=A,e.events.push(t)})),e.next=7,g.collection("hgames").doc(a);case 7:l=e.sent,P(l),l.onSnapshot((function(e){o(e.data())})),k(l,n),I(!0);case 12:case"end":return e.stop()}var r}),e)})));return function(){return e.apply(this,arguments)}}();return E?c.started||c.code?l.a.createElement(oe,{game:c,gameRef:S,name:A,hosting:F}):l.a.createElement("div",{className:"container"},l.a.createElement("h2",{className:"headline text-center"},"Secret ",Object(f.capitalize)(se)),l.a.createElement("div",{className:"row mt-3"},l.a.createElement(l.a.Fragment,null,l.a.createElement("p",null,"Your name: ",A))),l.a.createElement("div",{className:"row mt-3"},"Game Code:",l.a.createElement("input",{autoFocus:!0,className:"ml-3",value:j,onChange:function(e){return O(e.target.value)}})),l.a.createElement("div",{className:"row mt-3"},l.a.createElement("div",{className:"col"},l.a.createElement("button",{className:"btn btn-primary ml-3",onClick:J},"Host Game")),l.a.createElement("div",{className:"col"},l.a.createElement("button",{className:"btn btn-primary ml-3",onClick:function(e){e.preventDefault(),B.push("/g/".concat(j))}},"Join Game")),l.a.createElement("div",{className:"col"},l.a.createElement("button",{className:"btn btn-primary ml-3",onClick:D},"Create Game")))):l.a.createElement("div",{className:"container"},l.a.createElement("div",{className:"row mt-3"},l.a.createElement("div",{className:"col-3"},"Enter your name:"),l.a.createElement("div",{className:"col"},l.a.createElement("form",{onSubmit:function(){y(!0)}},l.a.createElement("input",{autoFocus:!0,value:A,onChange:function(e){localStorage.setItem("playerName",e.target.value),V(e.target.value)}}),l.a.createElement("input",{className:"btn btn-primary ml-3",type:"submit",value:"Next"})))))};var de=function(e){var a=Object(n.useState)(!1),t=Object(u.a)(a,2),r=(t[0],t[1]),c=Object(n.useState)(localStorage.getItem("playerName")||""),o=Object(u.a)(c,2),i=o[0],s=o[1],h=Object(n.useState)(null),v=Object(u.a)(h,2),b=v[0],E=v[1],y=Object(n.useState)(null),w=Object(u.a)(y,2),N=w[0],j=w[1],O=Object(f.get)(e,"match.params.code",null),C=Object(n.useState)(!1),T=Object(u.a)(C,2),S=T[0],P=T[1];return Object(n.useEffect)((function(){null!==O&&function(){var e=Object(d.a)(m.a.mark((function e(){var a;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,g.collection("hgames").doc(O);case 2:a=e.sent,j(a),r(!0),a.onSnapshot((function(e){var a=e.data();E(a)}));case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()()}),[O]),null===b?null:S&&b.players.includes(i)?l.a.createElement(oe,{game:b,gameRef:N,name:i}):l.a.createElement("div",{className:"container"},l.a.createElement("h2",null,"Confirm your name"),S?l.a.createElement("div",{className:"row mt-3"},l.a.createElement("p",null,"You are: ",i)):l.a.createElement("form",{onSubmit:function(e){if(e.preventDefault(),P(!0),localStorage.setItem("playerName",i),b.players.includes(i))console.log("Name already registered");else if(b.started)console.log("Game already started!");else{var a=Object(p.a)(b,(function(e){e.players.push(i)}));k(N,a)}}},l.a.createElement("input",{autoFocus:!0,value:i,onChange:function(e){s(e.target.value)}}),l.a.createElement("input",{type:"submit",className:"btn btn-primary ml-3",value:"Next"})))};var ue=function(){return l.a.createElement(o.a,null,l.a.createElement(i.c,null,l.a.createElement(i.a,{exact:!0,path:"/",component:me}),l.a.createElement(i.a,{path:"/g/:code",component:de})))};c.a.render(l.a.createElement(l.a.StrictMode,null,l.a.createElement(ue,null)),document.getElementById("root"))}},[[46,1,2]]]);
//# sourceMappingURL=main.2e830911.chunk.js.map